import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class XMLConverter {
    public static void main(String[] args) {
        String inputXml = """
                <UpdatePUPDetails>
                <AccountDetails>
                <AccountType>CDO#~#DR</AccountType>
                <Currency>USD</Currency>
                </AccountDetails>
                </UpdatePUPDetails>
                <UpdateDUPDetails>
                <AccountDetails>
                <AccountType>RJ#~#CJ</AccountType>
                <Currency>USD</Currency>
                </AccountDetails>
                </UpdateDUPDetails>
                """;

        // Regex to match the AccountDetails with #~#
        String regex = "(<AccountDetails>\\s*<AccountType>)([^#~#]+)#~#([^<]+)(</AccountType>\\s*<Currency>USD</Currency>\\s*</AccountDetails>)";
        
        // Replacement string to split the AccountType values into separate AccountDetails blocks
        String replacement = """
                $1$2</AccountType>
                <Currency>USD</Currency>
                </AccountDetails>
                <AccountDetails>
                <AccountType>$3</AccountType>
                <Currency>USD</Currency>
                </AccountDetails>
                """;

        // Apply the regex to the input XML
        Pattern pattern = Pattern.compile(regex, Pattern.DOTALL);
        Matcher matcher = pattern.matcher(inputXml);
        String outputXml = matcher.replaceAll(replacement);

        // Print the result
        System.out.println(outputXml);
    }
}
