import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class XMLConverter {
    public static void main(String[] args) {
        String inputXml = """
                <UpdatePUPDetails>
                <AccountDetails>
                <AccountType>CDO#~#DR</AccountType>
                <Currency>USD</Currency>
                </AccountDetails>
                </UpdatePUPDetails>
                <UpdateDUPDetails>
                <AccountDetails>
                <AccountType>RJ#~#CJ</AccountType>
                <Currency>USD</Currency>
                </AccountDetails>
                </UpdateDUPDetails>
                """;

        String regex = "(<AccountDetails>\\s*<AccountType>)([^<]+)#~#([^<]+)(</AccountType>\\s*<Currency>USD</Currency>\\s*</AccountDetails>)";
        String replacement = """
                $1$2</AccountType>
                <Currency>USD</Currency>
                </AccountDetails>
                <AccountDetails>
                <AccountType>$3</AccountType>
                <Currency>USD</Currency>
                </AccountDetails>
                """;

        Pattern pattern = Pattern.compile(regex);
        Matcher matcher = pattern.matcher(inputXml);
        String outputXml = matcher.replaceAll(replacement);

        System.out.println(outputXml);
    }
}
